function nsearchtable(){var input,filter,table,tr,td,i,txtValue;for(filter=(input=document.getElementById("ninputsearch")).value.toUpperCase(),tbody=document.getElementsByTagName("tbody")[0],tr=tbody.getElementsByTagName("tr"),console.log(tr),i=0;i<tr.length;i++)(td=tr[i].getElementsByTagName("td")[1])&&((txtValue=td.textContent||td.innerText).toUpperCase().indexOf(filter)>-1?tr[i].style.display="":tr[i].style.display="none")}function nsearchproduct(){var input,filter,i,txtValue,name;for(filter=(input=document.getElementById("ninputsearch")).value.toUpperCase(),products=document.getElementsByClassName("products"),console.log(products[0]),i=0;i<products.length;i++)(name=products[i].getElementsByClassName("nproductname"))&&((txtValue=name[0].innerText).toUpperCase().indexOf(filter)>-1?products[i].style.display="":products[i].style.display="none")}var chartNv=Highcharts.chart("ndbtopnv",{chart:{type:"bar",height:"500"},title:{text:"Revenue by Employees",align:"left"},xAxis:{categories:[],title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Revenue",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:" $"},plotOptions:{bar:{colorByPoint:!0,borderRadius:"50%",dataLabels:{enabled:!0},groupPadding:.1},series:{dataLabels:{enabled:!0,format:"{point.y:.2f}$"}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{name:"Revenue",data:[]}]}),chartProduct=Highcharts.chart("ndbproducts",{chart:{type:"column"},title:{text:"Quantity by Products",align:"left"},xAxis:{categories:[],title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Quantity",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:" "},plotOptions:{column:{colorByPoint:!0,borderRadius:"50%",dataLabels:{enabled:!0},groupPadding:.1},series:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{name:"Quantity",data:[]}]}),chart1=Highcharts.chart("container1",{chart:{zoomType:"xy"},title:{text:"",align:"left"},xAxis:[{categories:null,crosshair:!0}],yAxis:[{labels:{format:"{value} $",style:{color:Highcharts.getOptions().colors[1]}},title:{text:"Revenue",style:{color:Highcharts.getOptions().colors[1]}},opposite:!0},{gridLineWidth:0,title:{text:"Quantity",style:{color:Highcharts.getOptions().colors[0]}},labels:{format:"{value}",style:{color:Highcharts.getOptions().colors[0]}}}],tooltip:{shared:!0},legend:{layout:"vertical",align:"left",x:80,verticalAlign:"top",y:55,floating:!0,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},series:[{name:"Quantity",type:"column",yAxis:1,data:null,tooltip:{valueSuffix:""}},{name:"Revenue",type:"spline",data:null,tooltip:{valueSuffix:" $"}}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{floating:!1,layout:"horizontal",align:"center",verticalAlign:"bottom",x:0,y:0},yAxis:[{labels:{align:"right",x:0,y:-6},showLastLabel:!1},{labels:{align:"left",x:0,y:-6},showLastLabel:!1},{visible:!1}]}}]}}),timeout,intervalID;async function changeDay(from2,to2,option){var from=document.getElementById("fromDate").value,to=document.getElementById("toDate").value;if(from&&to)var body={from:from,to:to,from2:from2,to2:to2,option:option};else var body={from:null,to:null,from2:from2,to2:to2,option:option};var result=await fetch("http://localhost:8080/api/requestdata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});if(result.ok){var data=await result.json();console.log(data);var revenue=data.revenue,reHtml,text;document.getElementById("norevenue").textContent="$"+revenue,document.getElementById("noorders").textContent=data.orders,document.getElementById("nocustomer").textContent=data.customer,"1"==option&&(text="From yesterday"),"2"==option&&(text="From last Month"),"3"==option&&(text="From last Year");var nform=document.getElementsByClassName("nfrom");nform[0].innerHTML=data.comparedRevenue>=0?`<i class="green"><i class="fa fa-sort-asc"></i>${data.comparedRevenue}% </i> ${text}`:`<i class="red"><i class="fa fa-sort-desc"></i>${-data.comparedRevenue}% </i> ${text}`,nform[1].innerHTML=data.comparedOrder>=0?`<i class="green"><i class="fa fa-sort-asc"></i>${data.comparedOrder}% </i> ${text}`:`<i class="red"><i class="fa fa-sort-desc"></i>${-data.comparedOrder}% </i> ${text}`,nform[2].innerHTML=data.comparedCustomer>=0?`<i class="green"><i class="fa fa-sort-asc"></i>${data.comparedCustomer}% </i> ${text}`:`<i class="red"><i class="fa fa-sort-desc"></i>${-data.comparedCustomer}% </i> ${text}`,chart1.xAxis[0].update({categories:data.dataKey}),chart1.series[0].update({name:"Quantity",type:"column",yAxis:1,data:data.dataValue1,tooltip:{valueSuffix:""}},!0),chart1.series[1].update({name:"Revenue",type:"spline",data:data.dataValue2,tooltip:{valueSuffix:" $"}},!0),chartNv.xAxis[0].update({categories:data.dataNvKey}),chartNv.series[0].update({data:data.datanNvValue},!0),chartProduct.xAxis[0].update({categories:data.dataProductKey}),chartProduct.series[0].update({data:data.datanProductValue},!0)}}async function changeDay2(from2,to2,option){var from=document.getElementById("fromDate").value,to=document.getElementById("toDate").value;if(from&&to)var body={from:from,to:to,from2:from2,to2:to2,option:option};else var body={from:null,to:null,from2:from2,to2:to2,option:option};var result=await fetch("http://localhost:8080/api/requestdata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});if(result.ok){var data=await result.json(),sizeTb;document.getElementById("sizeTb").innerHTML=data.sizeTb;var html="",dataTb,content;if(data.data0revenue.length>0){html+=`<div class="panel panel-default npanel">\n        <div class="panel-heading">\n          <h4 class="panel-title">\n            <a data-toggle="collapse" href="#collapse${data.data0revenue[0].length}">\n              <i class="fa fa-exclamation-triangle nrow-modal-body-icon"\n                aria-hidden="true"></i>\n              <span class="nrow-modal-body-content">Những ngày liên tục có doanh thu bằng 0</span>\n            </a>\n          </h4>\n        </div>\n        <div id="collapse${data.data0revenue[0].length}" class="panel-collapse collapse">`;for(var i=0;i<data.data0revenue.length;i++)html+=`<div class="panel-body npanel-body">${data.data0revenue[i]}</div>`;html+="</div>\n      </div>"}if(data.data0nv.length>0){html+=`<div class="panel panel-default npanel">\n        <div class="panel-heading">\n          <h4 class="panel-title">\n            <a data-toggle="collapse" href="#collapse${data.data0nv[0].length}">\n              <i class="fa fa-exclamation-triangle nrow-modal-body-icon"\n                aria-hidden="true"></i>\n              <span class="nrow-modal-body-content">Nhân viên có doanh thu không đủ yêu cầu</span>\n            </a>\n          </h4>\n        </div>\n        <div id="collapse${data.data0nv[0].length}" class="panel-collapse collapse">`;for(var i=0;i<data.data0nv.length;i++)html+=`<div class="panel-body npanel-body">${data.data0nv[i]}</div>`;html+="</div>\n      </div>"}if(data.data0sales.length>0){html+=`<div class="panel panel-default npanel">\n        <div class="panel-heading">\n          <h4 class="panel-title">\n            <a data-toggle="collapse" href="#collapse${data.data0sales[0].length}">\n              <i class="fa fa-exclamation-triangle nrow-modal-body-icon"\n                aria-hidden="true"></i>\n              <span class="nrow-modal-body-content">Những sản phẩm không bán được</span>\n            </a>\n          </h4>\n        </div>\n        <div id="collapse${data.data0sales[0].length}" class="panel-collapse collapse">`;for(var i=0;i<data.data0sales.length;i++)html+=`<div class="panel-body npanel-body">${data.data0sales[i]}</div>`;html+="</div>\n      </div>"}html+="</div>",document.getElementById("panel-group").innerHTML=html;for(var html2='<table class="table table-striped table-inverse ">\n    <thead class="thead-inverse">\n      <tr>\n      <th></th>\n      <th>Tên Sản phẩm</th>\n      <th>Loại sản phẩm</th>\n      <th>Thời gian ra mắt</th>\n      <th>Số lượng bán được trong thời gian này</th>\n      <th>Số lượng tồn kho</th>\n      <th>Hàm U</th>\n      </tr>\n    </thead>\n    <tbody>',i=0;i<data.desionMatrixs.length;i++)html2+=`<tr>\n      <td></td>\n      <td>${data.desionMatrixs[i].ten}</td>\n      <td >${data.desionMatrixs[i].loai}</td>\n      <td>${data.desionMatrixs[i].thoiGianRaMat}</td>\n      <td>${data.desionMatrixs[i].soLuongBan}</td>\n      <td >${data.desionMatrixs[i].soLuongTonKho}</td>\n      <td></td>\n      </tr>`;html2+="</tbody>\n    </table>",document.getElementById("panel-group2").innerHTML=html2}}function requestData(from2,to2,option){intervalID=setInterval((function(){changeDay(from2,to2,option)}),1e3),changeDay2(from2,to2,option)}function updateChart(chartUp,dataKey,dataKey){chartUp.xAxis[0].setCategories=dataKey,chartUp.series[0].update({data:dataKey},!0)}function init(){const[date,time]=formatDate(new Date).split(" ");document.getElementById("fromDate").value=date,document.getElementById("toDate").value=date;var date2f=new Date;date2f.setDate(date2f.getDate()-1);const[date2,time2]=formatDate(date2f).split(" ");requestData(date2,date2,"1")}function padTo2Digits(num){return num.toString().padStart(2,"0")}function formatDate(date){return[date.getFullYear(),padTo2Digits(date.getMonth()+1),padTo2Digits(date.getDate())].join("-")+" "+[padTo2Digits(date.getHours()),padTo2Digits(date.getMinutes())].join(":")}function clearInterval1(){clearInterval(intervalID)}function selectCustomDate(){var option=document.getElementById("selectCustomDate").value,from=document.getElementById("fromDate").value,to=document.getElementById("toDate").value;if("1"===option){clearInterval1();const[date,time]=formatDate(new Date).split(" ");document.getElementById("fromDate").value=date,document.getElementById("toDate").value=date,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].removeAttribute("hidden");var date2f=new Date;date2f.setDate(date2f.getDate()-1);const[date2,time2]=formatDate(date2f).split(" ");requestData(date2,date2,option)}else if("2"===option){clearInterval1();const[date,time]=formatDate(new Date).split(" ");var firstDayf=new Date((new Date).getFullYear(),(new Date).getMonth(),1);const[firstDay,timef]=formatDate(firstDayf).split(" ");document.getElementById("fromDate").value=firstDay,document.getElementById("toDate").value=date,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].removeAttribute("hidden");var firstDay2f=new Date((new Date).getFullYear(),(new Date).getMonth()-1,1);const[firstDay2,firsttime2]=formatDate(firstDay2f).split(" ");var lastDay2f=new Date((new Date).getFullYear(),(new Date).getMonth(),0);const[lastDay2,lasttime2]=formatDate(lastDay2f).split(" ");requestData(firstDay2,lastDay2,option)}else if("3"===option){clearInterval1();const[date,time]=formatDate(new Date).split(" ");var firstDayf=new Date((new Date).getFullYear(),0,1);const[firstDay,timef]=formatDate(firstDayf).split(" ");document.getElementById("fromDate").value=firstDay,document.getElementById("toDate").value=date,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].removeAttribute("hidden");var firstDay2f=new Date((new Date).getFullYear()-1,0,1);const[firstDay2,firsttime2]=formatDate(firstDay2f).split(" ");var lastDay2f=new Date((new Date).getFullYear(),0,0);const[lastDay2,lasttime2]=formatDate(lastDay2f).split(" ");requestData(firstDay2,lastDay2,option)}else if("4"===option){clearInterval1();var datef=new Date;datef.setDate(datef.getDate()-1);const[date,time]=formatDate(datef).split(" ");document.getElementById("fromDate").value=date,document.getElementById("toDate").value=date,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].hidden=!0;requestData(null,null,option)}else if("5"===option){clearInterval1();var firstDayf=new Date((new Date).getFullYear(),(new Date).getMonth()-1,1);const[firstDay,timef]=formatDate(firstDayf).split(" ");var lastDayf=new Date((new Date).getFullYear(),(new Date).getMonth(),0);const[lastDay,time]=formatDate(lastDayf).split(" ");document.getElementById("fromDate").value=firstDay,document.getElementById("toDate").value=lastDay,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].hidden=!0;requestData(null,null,option)}else if("6"===option){clearInterval1();var firstDayf=new Date((new Date).getFullYear()-1,0,1);const[firstDay,timef]=formatDate(firstDayf).split(" ");var lastDayf=new Date((new Date).getFullYear(),0,0);const[lastDay,time]=formatDate(lastDayf).split(" ");document.getElementById("fromDate").value=firstDay,document.getElementById("toDate").value=lastDay,document.getElementById("fromDate").readOnly=!0,document.getElementById("toDate").readOnly=!0;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].hidden=!0;requestData(null,null,option)}else if("7"===option){clearInterval1(),document.getElementById("fromDate").readOnly=!1,document.getElementById("toDate").readOnly=!1;for(var nform=document.getElementsByClassName("nfrom"),i=0;i<nform.length;i++)nform[i].hidden=!0;requestData(null,null,option)}}